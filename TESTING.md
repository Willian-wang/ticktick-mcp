# ä»»åŠ¡ç›‘æ§åŠŸèƒ½æµ‹è¯•æŒ‡å—

## æµ‹è¯•å‰å‡†å¤‡

1. ç¡®ä¿å·²ç»å®ŒæˆTickTick OAuthè®¤è¯
2. åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ç›‘æ§é—´éš”ï¼ˆå¯é€‰ï¼‰ï¼š
   ```env
   TASK_MONITOR_INTERVAL=60  # è®¾ç½®ä¸º60ç§’ä»¥ä¾¿å¿«é€Ÿæµ‹è¯•
   ```

## æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨MCPæœåŠ¡å™¨

```bash
cd c:\Users\Jayfeather\code\willian-ticktick-mcp
uv run -m ticktick_mcp.cli run
```

æœåŠ¡å™¨å¯åŠ¨æ—¶åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹æ—¥å¿—ï¼š
```
INFO:__main__:TickTick client initialized successfully
INFO:__main__:Successfully connected to TickTick API with X projects
INFO:__main__:Task monitor started with check interval: 60s
INFO:root:TaskMonitor initialized with check_interval=60s
INFO:root:Database initialized at task_history.db
INFO:root:TaskMonitor started
INFO:root:Starting task check...
```

### 2. åœ¨Claudeä¸­æµ‹è¯•åŸºç¡€åŠŸèƒ½

è¿æ¥Claude Desktopåï¼Œå°è¯•ä»¥ä¸‹å‘½ä»¤ï¼š

```
# æŸ¥çœ‹å½“å‰ä»»åŠ¡ç»Ÿè®¡
get_task_statistics()

# åº”è¯¥æ˜¾ç¤ºï¼š
# ğŸ“Š Task Statistics
# ğŸ“ Current Tasks: X
# âœ… Total Completed: 0  (ç¬¬ä¸€æ¬¡è¿è¡Œä¸º0)
# ğŸ¯ Completed Today: 0
# ...
```

### 3. æµ‹è¯•ä»»åŠ¡å®Œæˆæ•è·

**æ­¥éª¤Aï¼šåˆ›å»ºæµ‹è¯•ä»»åŠ¡**

åœ¨Claudeä¸­ï¼š
```
# åˆ›å»ºä¸€ä¸ªæµ‹è¯•ä»»åŠ¡
create_task(title="æµ‹è¯•ä»»åŠ¡ç›‘æ§åŠŸèƒ½", project_id="your_project_id", priority=5)
```

**æ­¥éª¤Bï¼šå®Œæˆä»»åŠ¡**

åœ¨TickTickåº”ç”¨æˆ–ç½‘é¡µç«¯å®Œæˆè¿™ä¸ªä»»åŠ¡

**æ­¥éª¤Cï¼šæ‰‹åŠ¨è§¦å‘æ£€æŸ¥**

åœ¨Claudeä¸­ï¼š
```
# ä¸ç­‰å¾…è‡ªåŠ¨æ£€æŸ¥ï¼Œç«‹å³è§¦å‘
trigger_task_check()
```

åº”è¯¥çœ‹åˆ°ï¼š
```
âœ… Task check completed successfully. The task history has been updated.
```

**æ­¥éª¤Dï¼šæŸ¥è¯¢å·²å®Œæˆä»»åŠ¡**

```
# æŸ¥è¯¢æ‰€æœ‰å·²å®Œæˆä»»åŠ¡
get_completed_tasks()

# åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰å®Œæˆçš„ä»»åŠ¡
```

### 4. æµ‹è¯•æ—¶é—´è¿‡æ»¤

```
# æŸ¥è¯¢ä»Šå¤©å®Œæˆçš„ä»»åŠ¡
get_completed_tasks(start_date="2025-10-20")

# æŸ¥è¯¢ç‰¹å®šæ—¶é—´èŒƒå›´
get_completed_tasks(start_date="2025-10-01", end_date="2025-10-31")

# é™åˆ¶è¿”å›æ•°é‡
get_completed_tasks(limit=10)
```

### 5. æµ‹è¯•é¡¹ç›®è¿‡æ»¤

```
# æŸ¥è¯¢ç‰¹å®šé¡¹ç›®çš„å·²å®Œæˆä»»åŠ¡
get_completed_tasks(project_id="your_project_id")
```

### 6. æµ‹è¯•ç»Ÿè®¡åŠŸèƒ½

```
# å®Œæˆå‡ ä¸ªä»»åŠ¡åå†æ¬¡æŸ¥çœ‹ç»Ÿè®¡
get_task_statistics()

# åº”è¯¥çœ‹åˆ°æ•°å­—å¢åŠ ï¼š
# ğŸ“Š Task Statistics
# ğŸ“ Current Tasks: X
# âœ… Total Completed: Y  (å¢åŠ äº†)
# ğŸ¯ Completed Today: Z
# ğŸ“… Completed This Week: W
# ğŸ—‘ï¸ Deleted Tasks: 0
# ğŸ“ˆ Completion Rate: XX.X%
```

### 7. æµ‹è¯•è‡ªåŠ¨ç›‘æ§

ä¸æ‰‹åŠ¨è§¦å‘ï¼Œç­‰å¾…é…ç½®çš„æ—¶é—´é—´éš”ï¼ˆä¾‹å¦‚60ç§’ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼š
1. åœ¨TickTickä¸­å®Œæˆä¸€ä¸ªä»»åŠ¡
2. ç­‰å¾…ç›‘æ§è‡ªåŠ¨è¿è¡Œ
3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—åº”è¯¥æ˜¾ç¤ºç±»ä¼¼ï¼š
   ```
   INFO:root:Starting task check...
   INFO:root:Found 1 disappeared tasks
   INFO:root:Marked task xxx (ä»»åŠ¡æ ‡é¢˜) as completed
   INFO:root:Task check completed in X.XXs
   ```
4. åœ¨Claudeä¸­æŸ¥è¯¢å·²å®Œæˆä»»åŠ¡ï¼Œåº”è¯¥èƒ½çœ‹åˆ°è‡ªåŠ¨æ•è·çš„ä»»åŠ¡

### 8. æ£€æŸ¥æ•°æ®åº“

å¯ä»¥ç›´æ¥æŸ¥çœ‹SQLiteæ•°æ®åº“ï¼š

```bash
# ä½¿ç”¨sqlite3å‘½ä»¤è¡Œå·¥å…·
sqlite3 task_history.db

# æŸ¥è¯¢å·²å®Œæˆä»»åŠ¡è¡¨
SELECT title, completed_time FROM completed_tasks ORDER BY completed_time DESC;

# æŸ¥çœ‹è¡¨ç»“æ„
.schema completed_tasks

# é€€å‡º
.exit
```

## éªŒè¯æ¸…å•

- [ ] æœåŠ¡å™¨å¯åŠ¨æ—¶TaskMonitoræˆåŠŸåˆå§‹åŒ–
- [ ] æ•°æ®åº“æ–‡ä»¶ `task_history.db` è¢«åˆ›å»º
- [ ] ç¬¬ä¸€æ¬¡æ£€æŸ¥å»ºç«‹åŸºçº¿ï¼ˆä¸æŠ¥å‘Šä»»ä½•å®Œæˆï¼‰
- [ ] æ‰‹åŠ¨è§¦å‘æ£€æŸ¥å·¥ä½œæ­£å¸¸
- [ ] å®Œæˆçš„ä»»åŠ¡è¢«æ­£ç¡®æ•è·
- [ ] `get_completed_tasks` èƒ½è¿”å›å·²å®Œæˆä»»åŠ¡
- [ ] æ—¶é—´è¿‡æ»¤å·¥ä½œæ­£å¸¸
- [ ] é¡¹ç›®è¿‡æ»¤å·¥ä½œæ­£å¸¸
- [ ] `get_task_statistics` æ˜¾ç¤ºæ­£ç¡®çš„ç»Ÿè®¡æ•°æ®
- [ ] è‡ªåŠ¨å®šæœŸæ£€æŸ¥åœ¨åå°æ­£å¸¸è¿è¡Œ
- [ ] å·²åˆ é™¤çš„ä»»åŠ¡è¢«æ­£ç¡®è¯†åˆ«

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡è¿è¡Œæ²¡æœ‰æ˜¾ç¤ºä»»ä½•å·²å®Œæˆä»»åŠ¡ï¼Ÿ

A: ç¬¬ä¸€æ¬¡æ£€æŸ¥ä¼šå»ºç«‹åŸºçº¿ï¼Œåªä¿å­˜å½“å‰ä»»åŠ¡çŠ¶æ€ã€‚åªæœ‰åœ¨åç»­æ£€æŸ¥ä¸­æ‰èƒ½æ£€æµ‹åˆ°ä»»åŠ¡çš„å˜åŒ–ã€‚

### Q: å¦‚ä½•éªŒè¯ç›‘æ§æ­£åœ¨è¿è¡Œï¼Ÿ

A: æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼Œåº”è¯¥æ¯éš”é…ç½®çš„é—´éš”æ—¶é—´çœ‹åˆ° "Starting task check..." å’Œ "Task check completed" çš„æ—¥å¿—ã€‚

### Q: ä»»åŠ¡å®Œæˆåæ²¡æœ‰è¢«æ•è·æ€ä¹ˆåŠï¼Ÿ

A: 
1. ç¡®è®¤ä»»åŠ¡ç¡®å®ä»æœªå®Œæˆåˆ—è¡¨ä¸­æ¶ˆå¤±
2. æ£€æŸ¥APIæ˜¯å¦è¿”å›äº†ä»»åŠ¡çŠ¶æ€ï¼ˆstatus=2è¡¨ç¤ºå·²å®Œæˆï¼‰
3. å¦‚æœä»»åŠ¡æ˜¯åœ¨æœåŠ¡å™¨å¯åŠ¨å‰å®Œæˆçš„ï¼Œæ— æ³•è¢«æ•è·
4. æ‰‹åŠ¨è§¦å‘ `trigger_task_check()` æ¥ç«‹å³æ£€æŸ¥

### Q: æ•°æ®åº“æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é»˜è®¤åœ¨æœåŠ¡å™¨è¿è¡Œç›®å½•ä¸‹åˆ›å»º `task_history.db`ã€‚å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ `TASK_MONITOR_DB_PATH` è‡ªå®šä¹‰è·¯å¾„ã€‚

### Q: å¦‚ä½•æ¸…ç©ºå†å²æ•°æ®ï¼Ÿ

A: åœæ­¢æœåŠ¡å™¨ï¼Œåˆ é™¤ `task_history.db` æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚

## æ€§èƒ½æµ‹è¯•

å¯¹äºæœ‰å¤§é‡ä»»åŠ¡çš„ç”¨æˆ·ï¼Œå»ºè®®æµ‹è¯•ï¼š

1. **æ£€æŸ¥è€—æ—¶**ï¼šæŸ¥çœ‹æ—¥å¿—ä¸­ "Task check completed in X.XXs" çš„æ—¶é—´
2. **å†…å­˜ä½¿ç”¨**ï¼šç›‘æ§æœåŠ¡å™¨è¿›ç¨‹çš„å†…å­˜å ç”¨
3. **æ•°æ®åº“å¤§å°**ï¼šéšç€æ—¶é—´æ¨ç§»è§‚å¯Ÿ `task_history.db` çš„æ–‡ä»¶å¤§å°
4. **APIé…é¢**ï¼šæ³¨æ„TickTick APIçš„è°ƒç”¨é¢‘ç‡é™åˆ¶

å»ºè®®ï¼š
- å¦‚æœæœ‰è¶…è¿‡50ä¸ªé¡¹ç›®ï¼Œè€ƒè™‘å¢åŠ æ£€æŸ¥é—´éš”åˆ°15-30åˆ†é’Ÿ
- å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶
- è€ƒè™‘å®šæœŸæ¸…ç†æ—§çš„å†å²æ•°æ®

## è°ƒè¯•å»ºè®®

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. è®¾ç½®æ›´è¯¦ç»†çš„æ—¥å¿—çº§åˆ«
2. æŸ¥çœ‹å®Œæ•´çš„æœåŠ¡å™¨æ—¥å¿—è¾“å‡º
3. ç›´æ¥æŸ¥è¯¢SQLiteæ•°æ®åº“éªŒè¯æ•°æ®
4. å‡å°æ£€æŸ¥é—´éš”ä»¥ä¾¿æ›´å¿«é‡ç°é—®é¢˜
5. æŸ¥çœ‹ `task_monitor.py` ä¸­çš„è¯¦ç»†é”™è¯¯æ—¥å¿—

